'use strict';function Graph(){var c=this,e=[],a=[],m={},n=640,p=480,g=document.createElement("div");g.className="noselection";g.style.position="relative";g.style.cursor="default";var r=function(b,a){var f=[],d=document.createElement("div");(function(){var k=document.createElement("canvas");(function(){k.width=22;k.height=22;var a=k.getContext("2d");a.beginPath();a.arc(11,11,10,0,2*Math.PI);a.stroke();k.oncontextmenu=function(a){a.preventDefault()}})();var h=document.createElement("div");h.style.position=
"relative";h.style.top="-11px";h.style.textAlign="center";h.innerHTML=b;d.addEventListener("mousedown",function(b){var e=a.sub(position_mouse(b)),d=function(b){a=position_mouse(b).add(e);l();for(var d in f)b=f[d],b.redraw()},c=function(a){window.removeEventListener("mousemove",d);window.removeEventListener("mouseup",c);for(var b in f)a=f[b],a.redraw()};window.addEventListener("mousemove",d);window.addEventListener("mouseup",c)});d.oncontextmenu=function(a){void 0===m.v?m.v=e[b]:(a=new q(m.v,e[b]),
a.vertex_v.push_edge(a),a.vertex_w.push_edge(a),c.edges.push(a),m.v=void 0);return!1};d.appendChild(k);d.appendChild(h);d.style.position="absolute";d.style.zIndex="1";d.style.lineHeight="0"})();var l=function(){d.style.left=a.x+"px";d.style.top=a.y+"px"};l();c.div.appendChild(d);this.id=b;this.position=function(){return a};this.push_edge=function(a){f.push(a)}},q=function(a,e){var f=document.createElement("canvas"),d=function(){var d=f.getContext("2d"),c=a.position(),h=e.position(),g=h.sub(c),g=g.div(g.abs()),
c=c.add(g.mul(10)),h=h.sub(g.mul(10));d.beginPath();d.moveTo(c.x,c.y);d.lineTo(h.x,h.y);d.stroke()};f.style.position="absolute";f.style.left="11px";f.style.top="11px";f.width=n;f.height=p;d();this.redraw=function(){f.getContext("2d").clearRect(0,0,f.width,f.height);d()};c.div.appendChild(f);this.vertex_v=a;this.vertex_w=e};this.addvertex=function(){e.push(new r(e.length,new Vector(100,100)))};this.input=function(b){b=b.split(/[ \n]/);n=parseInt(b[0]);b.shift();p=parseInt(b[0]);b.shift();g.style.width=
n+"px";g.style.height=p+"px";var c=parseInt(b[0]);b.shift();var f=parseInt(b[0]);b.shift();for(var d=0;d<c;d++){var l=parseInt(b[0]);b.shift();var k=parseInt(b[0]);b.shift();e.push(new r(e.length,new Vector(l,k)))}for(d=0;d<f;d++)c=parseInt(b[0]),b.shift(),l=parseInt(b[0]),b.shift(),c=new q(e[c],e[l]),c.vertex_v.push_edge(c),c.vertex_w.push_edge(c),a.push(c)};this.output=function(){var b;b="";b+=e.length+" "+a.length+"\n";e.forEach(function(a){b+=a.x+" "+a.y+"\n"});a.forEach(function(a){b+=a.vertex_v.id+
" "+a.vertex_w.id+"\n"});document.getElementById("pre_output").innerHTML=b};this.vertices=e;this.edges=a;this.edgecreation=m;this.div=g}function graphvisualize(c){var e;e=new Graph;e.input(c.innerHTML);c.innerHTML="";c.appendChild(e.div)}function graphvisualize_all(c){var e;c=c.getElementsByClassName("graphvisualizer");for(e=0;e<c.length;e++)graphvisualize(c[e]),c[e].style.visibility="visible"}
function Vector(c,e){this.x=c;this.y=e;this.abs=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};this.add=function(a){return new Vector(this.x+a.x,this.y+a.y)};this.sub=function(a){return new Vector(this.x-a.x,this.y-a.y)};this.mul=function(a){return new Vector(this.x*a,this.y*a)};this.div=function(a){return new Vector(this.x/a,this.y/a)};this.inp=function(a){return this.x*a.x+this.y*a.y};this.otp=function(a){return this.x*a.y-this.y*a.x};this.rtt=function(a){return new Vector(Math.cos(a)*
this.x-Math.sin(a)*this.y,Math.sin(a)*this.x+Math.cos(a)*this.y)};this.min=function(a){return this.abs()<a.abs()?this:a};this.bfr=function(a){return this.y<a.x}}function position_mouse(c){return new Vector(c.clientX+document.body.scrollLeft-document.body.clientLeft,c.clientY+document.body.scrollTop-document.body.clientTop)};

